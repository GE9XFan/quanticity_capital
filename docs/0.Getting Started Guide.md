# Getting Started with Quanticity Capital IB Integration

## Quick Start Guide

This guide walks you through setting up and running the Interactive Brokers account and portfolio monitoring system from scratch.

---

## Table of Contents

1. [Prerequisites](#prerequisites)
2. [Installation](#installation)
3. [Database Setup](#database-setup)
4. [Configuration](#configuration)
5. [Running the Application](#running-the-application)
6. [Querying Data](#querying-data)
7. [Running Tests](#running-tests)
8. [Troubleshooting](#troubleshooting)

---

## Prerequisites

### Required Software

1. **Python 3.11+**
2. **PostgreSQL 16.10+**
3. **Redis**
4. **Interactive Brokers TWS or IB Gateway** (paper trading account recommended)

---

## Installation

```bash
# 1. Create virtual environment
python3.11 -m venv venv
source venv/bin/activate

# 2. Install dependencies
pip install -r requirements.txt

# 3. Install IB API manually (from IB website)
# Download from: https://interactivebrokers.github.io/
```

---

## Database Setup

```bash
# 1. Create database
createdb quanticity_capital

# 2. Run migrations
psql -U postgres -d quanticity_capital -f migrations/001_initial_schema.sql

# 3. Verify
psql -U postgres -d quanticity_capital
\dt  # Should show 6 tables
\dv  # Should show 3 views
```

---

## Configuration

```bash
# 1. Copy example config
cp .env.example .env

# 2. Edit .env and set:
# - POSTGRES credentials
# - IB_TEST_ACCOUNT=DU123456 (your account)

# 3. Start services
# - Start PostgreSQL
# - Start Redis  
# - Start IB Gateway/TWS with API enabled
```

---

## Running the Application

```bash
# Full monitoring (recommended)
python src/main.py

# Simple example
python examples/simple_account_summary.py

# Query stored data
python examples/query_stored_data.py
```

---

## Running Tests

```bash
# All integration tests (requires IB running)
pytest tests/integration/ -v -s

# Unit tests only
pytest tests/unit/ -v
```

---

## Troubleshooting

See full documentation for detailed troubleshooting:

- [`docs/2.1 Interactive brokers connection.md`](2.1%20Interactive%20brokers%20connection.md) - Connection issues
- [`docs/2.3 Account Summary Implementation.md`](2.3%20Account%20Summary%20Implementation.md) - 4 critical bugs and fixes
- [`docs/2.4 Positions Implementation.md`](2.4%20Positions%20Implementation.md) - Position tracking issues
- [`docs/2.5 Profit and Loss Implementation.md`](2.5%20Profit%20and%20Loss%20Implementation.md) - P&L monitoring issues

**Common Issues:**
- Connection timeout: Check TWS/Gateway is running with API enabled
- Redis error: Start Redis with `redis-server`
- PostgreSQL error: Check credentials in .env
- No data: Wait 3-5 minutes for IB updates
- 4 critical bugs: See [`docs/2.3 Account Summary Implementation.md`](2.3%20Account%20Summary%20Implementation.md)

---

**Version:** 0.1.0  
**Last Updated:** 2025-10-03
